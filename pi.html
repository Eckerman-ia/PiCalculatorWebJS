<!DOCTYPE html>
<html>
    <head>
        <title>Pi Calculator - Online</title>
    </head>
    <body>

        <h1>Pi Calculator - Online</h1>

        <script src="pi.js" type="text/javascript"></script>

        <script type="text/javascript">
        const elm_log = document.querySelector("#log")
        const elm_pi = document.querySelector("#pi")

        const chunk = (str, n) => {
            const chunks = []
            const len = str.length
            for(let i = 0; i < len; i += n)
                chunks.push(str.substr(i, n))
            return chunks
        }

        const test = (digits) => {
            let res = calculate(digits)
            elm_log.innerHTML = `Calculate ${res.digits} digits of PI number in ${res.time} seconds.<br><br>PI(${res.digits}) = 3.<br>\n`

            // elm_pi.innerText = res.pi
            // elm_pi.innerHTML = chunk(res.pi, 50).join(" (50) <br>").trimEnd("(50) <br>")
            elm_pi.innerHTML = chunk(res.pi.substr(1), 50)
                                    .map(line => 
                                        chunk(line, 5).join(" &nbsp; ")
                                    ).join("<br>")
        }

        window.addEventListener("load", () => {
            document.querySelector("button").click()
        })
        </script>

    </body>
</html>
